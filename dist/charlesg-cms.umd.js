(function(o,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(o=typeof globalThis<"u"?globalThis:o||self,e(o.CharlesgCms={},o.Vue))})(this,function(o,e){"use strict";const d=e.ref({}),u=e.ref("");function f(){const g=function(t,n={}){let a=t.split(".").reduce((s,L)=>s==null?void 0:s[L],d.value);return typeof a=="string"&&Object.keys(n).forEach(s=>{a=a.replace(`:${s}`,n[s])}),a||t},c=t=>{localStorage.setItem("userLanguage",t)},r=()=>localStorage.getItem("userLanguage")||document.documentElement.lang||"en",l=async function(t){try{const a=await(await fetch("/change-language",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({locale:t})})).json();d.value=a.translations,u.value=a.locale,c(a.locale)}catch(n){console.error("Failed to change language:",n)}};return{trans:g,setLocale:l,getLocale:function(){return u.value},initTranslations:async function(t,n){const a=r();a!==n?await l(a):(d.value=t,u.value=n)},getLanguagePreference:r,currentLocale:u}}const m={__name:"ExampleComponent",setup(g){const{trans:c,setLocale:r,getLocale:l,currentLocale:p}=f(),i=async t=>{console.log("changeLanguage",t),await r(t)};return(t,n)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("button",{onClick:n[0]||(n[0]=a=>i("en"))},"English"),e.createElementVNode("button",{class:"bg-gray-500 text-white px-4 py-2 rounded-md",onClick:n[1]||(n[1]=a=>i("fr"))},"Francasdasdadis tbnk"),e.createElementVNode("p",null,"Current language: "+e.toDisplayString(e.unref(p)),1),e.createElementVNode("p",null,"Translated text: "+e.toDisplayString(e.unref(c)("cyvian.static.add")),1)]))}};function y(g,c){const r=e.createApp({setup(){const{initTranslations:l,getLanguagePreference:p,setLocale:i,trans:t}=f(),n=p();return l(c,n),{setLocale:i,trans:t}},template:"<example-component></example-component>"});r.component("example-component",m),r.mount(g)}o.init=y,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
